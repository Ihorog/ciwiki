{
  "organism": "cimeika",
  "version": "1.0.0",
  "description": "Cimeika — єдина інтерактивна навігаційна бібліотека. CiWiki — зовнішній публічний шар, Legend CI — внутрішній світ.",
  "layers": [
    {
      "id": "outer",
      "name": "CiWiki",
      "description": "Зовнішній / публічний шар. Документація, процеси, концепції Cimeika.",
      "path": "/",
      "visibility": "public"
    },
    {
      "id": "inner",
      "name": "Legend CI",
      "description": "Внутрішній світ. Космологія Cimeika: 20 вузлів + центр Ci.",
      "path": "/legend/",
      "visibility": "internal"
    }
  ],
  "modules": [
    {
      "id": "legend-ci",
      "name": "Legend CI",
      "version": "1.0.0",
      "description": "Інтерактивна легенда CI: 20 вузлів + центр Ci, три шари, три режими навігації.",
      "status": "active",
      "routes": [
        "/legend/",
        "/legend_ci/README/",
        "/content/legend-ci/"
      ],
      "content_paths": [
        "docs/content/legend-ci.md",
        "docs/legend_ci/legend.graph.json",
        "docs/legend_ci/SCHEMA.legend.graph.json",
        "docs/_assets/legend/legend_ci_single.html"
      ],
      "graph": "docs/legend_ci/legend.graph.json",
      "ui": "docs/_assets/legend/legend_ci_single.html",
      "crdt_hook": true
    },
    {
      "id": "audit-supabase",
      "name": "Audit Supabase",
      "version": "0.1.0",
      "description": "Dormant ability: reads Supabase DB state via psql and writes deterministic JSON artifacts to audit_out/.",
      "status": "dormant",
      "spec": "docs/abilities/audit_supabase/README.md",
      "script_template": "docs/abilities/audit_supabase/audit_supabase.sh.template",
      "workflow_template": "docs/abilities/audit_supabase/workflow.template.yml",
      "consumer_repos": [
        "Ihorog/cit",
        "Ihorog/ci_gitapi",
        "Ihorog/cimeika-unified",
        "Ihorog/cimeika-backend",
        "Ihorog/ci-memory"
      ]
    }
  ],
  "audit_runs": {
    "_comment": "TEMPLATE SECTION — describes how audit runs should be recorded. Do not commit actual audit data here.",
    "_schema": {
      "run_id": "string — GitHub Actions run ID or local identifier (e.g. 'termux-20260227T130000Z')",
      "executed_at": "string — ISO-8601 timestamp of the audit run start",
      "executed_by": "string — 'github-actions' | 'termux' | 'manual'",
      "project_ref": "string — repo slug or Supabase project reference",
      "workflow": "string — workflow file that triggered the run (e.g. '.github/workflows/audit-supabase.yml')",
      "artifact_name": "string — GitHub Actions artifact name (e.g. 'audit-supabase-<run_id>')",
      "artifact_retention_days": "integer — how long the artifact is retained (default: 7)",
      "queries": [
        {
          "query_id": "string — deterministic slug [a-z0-9-]",
          "psql_exit_code": "integer — 0 = success",
          "duration_ms": "integer",
          "sql_sha256": "string — SHA-256 of the SQL query",
          "data_sha256": "string — SHA-256 of the serialized data array",
          "error": "string | null"
        }
      ]
    },
    "_example": {
      "run_id": "12345678",
      "executed_at": "2026-02-27T13:00:00Z",
      "executed_by": "github-actions",
      "project_ref": "cit",
      "workflow": ".github/workflows/audit-supabase.yml",
      "artifact_name": "audit-supabase-12345678",
      "artifact_retention_days": 7,
      "queries": [
        {
          "query_id": "check-schema-version",
          "psql_exit_code": 0,
          "duration_ms": 210,
          "sql_sha256": "e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855",
          "data_sha256": "a665a45920422f9d417e4867efdc4fb8a04a1f3fff1fa07e998e86f7f7a27ae3",
          "error": null
        }
      ]
    }
  },
  "navigation_roots": [
    {"label": "Головна", "path": "/"},
    {"label": "Legend CI", "path": "/legend/"}
  ],
  "build": {
    "framework": "mkdocs",
    "theme": "mkdocs-material",
    "source_dir": "docs/",
    "output_dir": "site/",
    "command": "mkdocs build"
  },
  "deploy": {
    "platform": "github-pages",
    "workflow": ".github/workflows/pages.yml",
    "custom_domain": "www.cimeika.com.ua",
    "site_url": "https://www.cimeika.com.ua/"
  }
}
